#!/usr/bin/env php
<?php
foreach (array(__DIR__ . '/../../autoload.php', __DIR__ . '/../vendor/autoload.php', __DIR__ . '/vendor/autoload.php') as $file) {
  if (file_exists($file)) {
    require $file;
    break;
  }
}

use ChangeIniSetting\ChangeIniSetting;

$opts = getopt("", array("file:", "name:", "value:"));

if(count($opts) != 3) {
  showusage();
  exit();
}
foreach($opts as $opt) {
  if(empty($opt)) {
    showusage();
    exit();
  }
}
try {
  $changer = new ChangeIniSetting();
  $changer->setFilePath($opts["file"]);
  $changer->updateSetting($opts["name"], $opts["value"]);
} catch(Exception $e) {
  echo $e->getMessage() . "\n";
  exit();
}

function showUsage() {
  echo 'Usage: sudo php-ini-setter[.phar]  --name $settingToChange --value $valueToSetTheValueTo --file $pathToIniFile'."\n";
}
?>
